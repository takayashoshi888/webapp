<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®åˆ†æ - ç›®æ ‡ç®¡ç†åº”ç”¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.0/echarts.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #FEFEFE 0%, #F8F9FA 100%);
            min-height: 100vh;
        }
        .hero-title {
            font-family: 'Noto Serif SC', serif;
            background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .stat-card {
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .chart-container {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
        }
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }
        .nav-link:hover {
            color: #FF6B6B;
        }
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
            border-radius: 1px;
        }
        .progress-circle {
            transform: rotate(-90deg);
        }
        .progress-circle-bg {
            fill: none;
            stroke: #E5E7EB;
            stroke-width: 8;
        }
        .progress-circle-fill {
            fill: none;
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dashoffset 1s ease-in-out;
        }
        .heatmap-cell {
            transition: all 0.3s ease;
        }
        .heatmap-cell:hover {
            transform: scale(1.1);
        }
        #background-animation {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <!-- èƒŒæ™¯åŠ¨ç”» -->
    <canvas id="background-animation"></canvas>
    
    <!-- å¯¼èˆªæ  -->
    <nav class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <img src="resources/app-logo.png" alt="åº”ç”¨Logo" class="w-8 h-8">
                    <span class="text-xl font-bold text-gray-800">æ¢¦æƒ³æ¸…å•</span>
                </div>
                <div class="flex items-center space-x-8">
                    <div class="flex space-x-8">
                        <a href="index.html" class="nav-link text-gray-700 hover:text-gray-900 px-3 py-2 text-sm font-medium">ç›®æ ‡ç®¡ç†</a>
                        <a href="dreams.html" class="nav-link text-gray-700 hover:text-gray-900 px-3 py-2 text-sm font-medium">æ¢¦æƒ³æ¸…å•</a>
                        <a href="analytics.html" class="nav-link active text-gray-700 hover:text-gray-900 px-3 py-2 text-sm font-medium">æ•°æ®åˆ†æ</a>
                        <a href="settings.html" class="nav-link text-gray-700 hover:text-gray-900 px-3 py-2 text-sm font-medium">ä¸ªäººè®¾ç½®</a>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button id="visual-board-btn" class="bg-gradient-to-r from-purple-400 to-pink-400 text-white px-4 py-2 rounded-lg text-sm font-medium hover:shadow-lg transition-all duration-300">
                            è§†è§‰åŒ–é¢æ¿
                        </button>
                        <button id="logout-btn" class="text-gray-500 hover:text-gray-700 px-3 py-2 text-sm font-medium">
                            ç™»å‡º
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- æ ‡é¢˜åŒºåŸŸ -->
        <div class="text-center mb-12 animate-on-load">
            <h1 class="hero-title text-4xl md:text-5xl font-bold mb-4">
                æ•°æ®åˆ†æä¸­å¿ƒ
            </h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                é€šè¿‡æ•°æ®æ´å¯Ÿä½ çš„æˆé•¿è½¨è¿¹ï¼Œè®©æ¯ä¸€æ­¥è¿›æ­¥éƒ½æœ‰æ•°æ®æ”¯æ’‘ã€‚
            </p>
        </div>

        <!-- å…³é”®æŒ‡æ ‡å¡ç‰‡ -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12 animate-on-load">
            <div class="stat-card rounded-lg shadow-md p-6 text-center">
                <div class="relative w-20 h-20 mx-auto mb-4">
                    <svg class="progress-circle w-20 h-20">
                        <circle class="progress-circle-bg" cx="40" cy="40" r="32"></circle>
                        <circle id="goals-progress-circle" class="progress-circle-fill" cx="40" cy="40" r="32" 
                                stroke="#FF6B6B" stroke-dasharray="201.06" stroke-dashoffset="201.06"></circle>
                    </svg>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <span id="goals-completion-rate" class="text-xl font-bold text-gray-800">0%</span>
                    </div>
                </div>
                <h3 class="text-lg font-semibold text-gray-800 mb-1">ç›®æ ‡å®Œæˆç‡</h3>
                <p class="text-sm text-gray-600">æ€»ä½“è¿›åº¦æ¦‚è§ˆ</p>
            </div>

            <div class="stat-card rounded-lg shadow-md p-6 text-center">
                <div class="text-4xl font-bold text-blue-500 mb-2" id="total-goals-count">0</div>
                <h3 class="text-lg font-semibold text-gray-800 mb-1">æ€»ç›®æ ‡æ•°</h3>
                <p class="text-sm text-gray-600">å·²è®¾å®šçš„ç›®æ ‡</p>
            </div>

            <div class="stat-card rounded-lg shadow-md p-6 text-center">
                <div class="text-4xl font-bold text-green-500 mb-2" id="completed-goals-count">0</div>
                <h3 class="text-lg font-semibold text-gray-800 mb-1">å·²å®Œæˆ</h3>
                <p class="text-sm text-gray-600">æˆåŠŸå®ç°çš„ç›®æ ‡</p>
            </div>

            <div class="stat-card rounded-lg shadow-md p-6 text-center">
                <div class="text-4xl font-bold text-yellow-500 mb-2" id="active-days-count">15</div>
                <h3 class="text-lg font-semibold text-gray-800 mb-1">æ´»è·ƒå¤©æ•°</h3>
                <p class="text-sm text-gray-600">æœ¬æœˆæ´»è·ƒè®°å½•</p>
            </div>
        </div>

        <!-- å›¾è¡¨åŒºåŸŸ -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
            <!-- ç›®æ ‡å®Œæˆè¶‹åŠ¿å›¾ -->
            <div class="chart-container rounded-lg shadow-md p-6 animate-on-load">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">ç›®æ ‡å®Œæˆè¶‹åŠ¿</h3>
                <div id="trend-chart" style="height: 300px;"></div>
            </div>

            <!-- åˆ†ç±»ç›®æ ‡åˆ†å¸ƒ -->
            <div class="chart-container rounded-lg shadow-md p-6 animate-on-load">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">ç›®æ ‡åˆ†ç±»åˆ†å¸ƒ</h3>
                <div id="category-chart" style="height: 300px;"></div>
            </div>
        </div>

        <!-- æœˆåº¦æ´»è·ƒåº¦çƒ­åŠ›å›¾ -->
        <div class="chart-container rounded-lg shadow-md p-6 mb-12 animate-on-load">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">æœˆåº¦æ´»è·ƒåº¦çƒ­åŠ›å›¾</h3>
            <div id="heatmap-container" class="overflow-x-auto">
                <!-- çƒ­åŠ›å›¾å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
            </div>
        </div>

        <!-- è¯¦ç»†ç»Ÿè®¡è¡¨æ ¼ -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- ç›®æ ‡å®Œæˆæ’è¡Œ -->
            <div class="chart-container rounded-lg shadow-md p-6 animate-on-load">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">åˆ†ç±»å®Œæˆç‡æ’è¡Œ</h3>
                <div id="completion-ranking" class="space-y-3">
                    <!-- æ’è¡Œæ•°æ®å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                </div>
            </div>

            <!-- æœ€è¿‘æ´»åŠ¨ -->
            <div class="chart-container rounded-lg shadow-md p-6 animate-on-load">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">æœ€è¿‘æ´»åŠ¨</h3>
                <div id="recent-activities" class="space-y-3">
                    <!-- æ´»åŠ¨æ•°æ®å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <!-- é¡µè„š -->
    <footer class="bg-white/80 backdrop-blur-md mt-16 py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <p class="text-gray-600">Â© 2025 æ¢¦æƒ³æ¸…å•åº”ç”¨. è®©æ¢¦æƒ³ç…§è¿›ç°å®ï¼Œè®©ç›®æ ‡æˆä¸ºåŠ¨åŠ›ã€‚</p>
            </div>
        </div>
    </footer>

    <!-- è„šæœ¬ -->
    <script src="main.js"></script>
    
    <script>
        // æ•°æ®åˆ†æç®¡ç†ç±»
        class AnalyticsManager {
            constructor() {
                this.goals = this.loadGoals();
                this.dreams = this.loadDreams();
                this.init();
            }

            init() {
                this.updateKeyMetrics();
                this.initCharts();
                this.initHeatmap();
                this.initRanking();
                this.initRecentActivities();
                this.initBackgroundAnimation();
                this.animateElements();
            }

            loadGoals() {
                const saved = localStorage.getItem('goals');
                return saved ? JSON.parse(saved) : [];
            }

            loadDreams() {
                const saved = localStorage.getItem('dreams');
                return saved ? JSON.parse(saved) : [];
            }

            updateKeyMetrics() {
                const totalGoals = this.goals.length;
                const completedGoals = this.goals.filter(goal => goal.progress === 100).length;
                const completionRate = totalGoals > 0 ? Math.round((completedGoals / totalGoals) * 100) : 0;

                // æ›´æ–°æ•°å­—æ˜¾ç¤º
                document.getElementById('total-goals-count').textContent = totalGoals;
                document.getElementById('completed-goals-count').textContent = completedGoals;
                document.getElementById('goals-completion-rate').textContent = completionRate + '%';

                // æ›´æ–°è¿›åº¦ç¯
                const circle = document.getElementById('goals-progress-circle');
                const circumference = 2 * Math.PI * 32; // r=32
                const offset = circumference - (completionRate / 100) * circumference;
                
                setTimeout(() => {
                    circle.style.strokeDashoffset = offset;
                }, 500);
            }

            initCharts() {
                this.initTrendChart();
                this.initCategoryChart();
            }

            initTrendChart() {
                const chart = echarts.init(document.getElementById('trend-chart'));
                
                // ç”Ÿæˆæ¨¡æ‹Ÿçš„è¶‹åŠ¿æ•°æ®
                const dates = [];
                const completionData = [];
                const today = new Date();
                
                for (let i = 29; i >= 0; i--) {
                    const date = new Date(today);
                    date.setDate(date.getDate() - i);
                    dates.push(date.toISOString().split('T')[0]);
                    completionData.push(Math.floor(Math.random() * 100));
                }

                const option = {
                    tooltip: {
                        trigger: 'axis',
                        backgroundColor: 'rgba(255, 255, 255, 0.9)',
                        borderColor: '#FF6B6B',
                        textStyle: { color: '#333' }
                    },
                    xAxis: {
                        type: 'category',
                        data: dates,
                        axisLabel: { 
                            color: '#666',
                            formatter: function(value) {
                                return value.split('-')[1] + '-' + value.split('-')[2];
                            }
                        }
                    },
                    yAxis: {
                        type: 'value',
                        axisLabel: { color: '#666' },
                        splitLine: { lineStyle: { color: '#E5E7EB' } }
                    },
                    series: [{
                        data: completionData,
                        type: 'line',
                        smooth: true,
                        lineStyle: { color: '#FF6B6B', width: 3 },
                        itemStyle: { color: '#FF6B6B' },
                        areaStyle: {
                            color: {
                                type: 'linear',
                                x: 0, y: 0, x2: 0, y2: 1,
                                colorStops: [
                                    { offset: 0, color: 'rgba(255, 107, 107, 0.3)' },
                                    { offset: 1, color: 'rgba(255, 107, 107, 0.05)' }
                                ]
                            }
                        }
                    }],
                    grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true }
                };

                chart.setOption(option);
                
                // å“åº”å¼
                window.addEventListener('resize', () => chart.resize());
            }

            initCategoryChart() {
                const chart = echarts.init(document.getElementById('category-chart'));
                
                const categories = [
                    { name: 'å¥åº·', value: 0, color: '#FF6B6B' },
                    { name: 'äº‹ä¸š', value: 0, color: '#4ECDC4' },
                    { name: 'å­¦ä¹ ', value: 0, color: '#FFD93D' },
                    { name: 'è´¢åŠ¡', value: 0, color: '#6C5CE7' },
                    { name: 'äººé™…å…³ç³»', value: 0, color: '#FD79A8' }
                ];

                // ç»Ÿè®¡å„åˆ†ç±»ç›®æ ‡æ•°é‡
                this.goals.forEach(goal => {
                    const category = categories.find(c => 
                        (goal.category === 'health' && c.name === 'å¥åº·') ||
                        (goal.category === 'career' && c.name === 'äº‹ä¸š') ||
                        (goal.category === 'learning' && c.name === 'å­¦ä¹ ') ||
                        (goal.category === 'finance' && c.name === 'è´¢åŠ¡') ||
                        (goal.category === 'relationships' && c.name === 'äººé™…å…³ç³»')
                    );
                    if (category) category.value++;
                });

                const option = {
                    tooltip: {
                        trigger: 'item',
                        backgroundColor: 'rgba(255, 255, 255, 0.9)',
                        borderColor: '#FF6B6B',
                        textStyle: { color: '#333' }
                    },
                    series: [{
                        type: 'pie',
                        radius: ['40%', '70%'],
                        center: ['50%', '50%'],
                        data: categories.filter(c => c.value > 0),
                        itemStyle: {
                            borderRadius: 8,
                            borderColor: '#fff',
                            borderWidth: 2
                        },
                        label: {
                            show: true,
                            formatter: '{b}: {c}',
                            color: '#666'
                        },
                        emphasis: {
                            itemStyle: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }]
                };

                chart.setOption(option);
                
                // å“åº”å¼
                window.addEventListener('resize', () => chart.resize());
            }

            initHeatmap() {
                const container = document.getElementById('heatmap-container');
                const today = new Date();
                const startDate = new Date(today.getFullYear(), 0, 1);
                
                // ç”Ÿæˆæ•´å¹´çš„æ—¥æœŸæ•°æ®
                const heatmapData = [];
                const currentDate = new Date(startDate);
                
                while (currentDate <= today) {
                    const intensity = Math.random();
                    heatmapData.push({
                        date: new Date(currentDate),
                        intensity: intensity,
                        count: Math.floor(intensity * 10)
                    });
                    currentDate.setDate(currentDate.getDate() + 1);
                }

                // åˆ›å»ºçƒ­åŠ›å›¾HTML
                const heatmapHTML = this.createHeatmapHTML(heatmapData);
                container.innerHTML = heatmapHTML;
            }

            createHeatmapHTML(data) {
                const weeks = [];
                const currentWeek = [];
                let weekIndex = 0;
                
                data.forEach((day, index) => {
                    currentWeek.push(day);
                    
                    if (currentWeek.length === 7 || index === data.length - 1) {
                        weeks.push([...currentWeek]);
                        currentWeek.length = 0;
                    }
                });

                let html = '<div class="flex flex-col space-y-1">';
                
                // æœˆä»½æ ‡ç­¾
                html += '<div class="flex mb-2 text-xs text-gray-600">';
                const months = ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'];
                months.forEach(month => {
                    html += `<div class="w-12 text-center">${month}</div>`;
                });
                html += '</div>';

                // æ˜ŸæœŸæ ‡ç­¾
                html += '<div class="flex items-start">';
                html += '<div class="flex flex-col mr-2 text-xs text-gray-600">';
                ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'].forEach(day => {
                    html += `<div class="h-3 flex items-center">${day}</div>`;
                });
                html += '</div>';

                // çƒ­åŠ›å›¾æ ¼å­
                html += '<div class="grid grid-cols-53 gap-1">';
                
                for (let week = 0; week < 53; week++) {
                    for (let day = 0; day < 7; day++) {
                        const dayData = data[week * 7 + day];
                        if (dayData) {
                            const intensity = dayData.intensity;
                            const bgColor = this.getHeatmapColor(intensity);
                            html += `<div class="heatmap-cell w-3 h-3 rounded-sm cursor-pointer" 
                                          style="background-color: ${bgColor}" 
                                          title="${dayData.date.toISOString().split('T')[0]}: ${dayData.count} ä¸ªæ´»åŠ¨">
                                   </div>`;
                        } else {
                            html += '<div class="w-3 h-3 rounded-sm bg-gray-100"></div>';
                        }
                    }
                }
                
                html += '</div></div></div>';
                
                return html;
            }

            getHeatmapColor(intensity) {
                const colors = [
                    '#E5E7EB', // 0 activity
                    '#C6E48B', // low
                    '#7BC96F', // medium-low
                    '#239A3B', // medium
                    '#196127'  // high
                ];
                return colors[Math.floor(intensity * (colors.length - 1)) + 1];
            }

            initRanking() {
                const container = document.getElementById('completion-ranking');
                const categories = [
                    { name: 'å¥åº·', icon: 'â¤ï¸', color: '#FF6B6B' },
                    { name: 'äº‹ä¸š', icon: 'ğŸ’¼', color: '#4ECDC4' },
                    { name: 'å­¦ä¹ ', icon: 'ğŸ“š', color: '#FFD93D' },
                    { name: 'è´¢åŠ¡', icon: 'ğŸ’°', color: '#6C5CE7' },
                    { name: 'äººé™…å…³ç³»', icon: 'ğŸ‘¥', color: '#FD79A8' }
                ];

                const rankings = categories.map(category => {
                    const categoryGoals = this.goals.filter(goal => {
                        return (category.name === 'å¥åº·' && goal.category === 'health') ||
                               (category.name === 'äº‹ä¸š' && goal.category === 'career') ||
                               (category.name === 'å­¦ä¹ ' && goal.category === 'learning') ||
                               (category.name === 'è´¢åŠ¡' && goal.category === 'finance') ||
                               (category.name === 'äººé™…å…³ç³»' && goal.category === 'relationships');
                    });
                    
                    const completed = categoryGoals.filter(goal => goal.progress === 100).length;
                    const total = categoryGoals.length;
                    const rate = total > 0 ? Math.round((completed / total) * 100) : 0;
                    
                    return { ...category, rate, completed, total };
                }).sort((a, b) => b.rate - a.rate);

                container.innerHTML = rankings.map((rank, index) => `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold" 
                                 style="background-color: ${rank.color}">
                                ${index + 1}
                            </div>
                            <span class="text-2xl">${rank.icon}</span>
                            <span class="font-medium text-gray-800">${rank.name}</span>
                        </div>
                        <div class="text-right">
                            <div class="text-lg font-bold" style="color: ${rank.color}">${rank.rate}%</div>
                            <div class="text-xs text-gray-500">${rank.completed}/${rank.total}</div>
                        </div>
                    </div>
                `).join('');
            }

            initRecentActivities() {
                const container = document.getElementById('recent-activities');
                
                // ç”Ÿæˆæ¨¡æ‹Ÿçš„æ´»åŠ¨æ•°æ®
                const activities = [
                    { type: 'goal_completed', title: 'å®Œæˆç›®æ ‡', description: 'æ¯å¤©è¿åŠ¨30åˆ†é’Ÿ', time: '2å°æ—¶å‰', icon: 'âœ…' },
                    { type: 'goal_created', title: 'åˆ›å»ºç›®æ ‡', description: 'å­¦ä¹ æ–°æŠ€èƒ½', time: '1å¤©å‰', icon: 'ğŸ¯' },
                    { type: 'dream_completed', title: 'å®ç°æ¢¦æƒ³', description: 'å­¦ä¼šä¸€é—¨æ–°è¯­è¨€', time: '3å¤©å‰', icon: 'ğŸŒŸ' },
                    { type: 'progress_update', title: 'è¿›åº¦æ›´æ–°', description: 'å‚¨è“„è®¡åˆ’ 60%', time: '5å¤©å‰', icon: 'ğŸ“ˆ' },
                    { type: 'goal_created', title: 'åˆ›å»ºç›®æ ‡', description: 'èŒä¸šå‘å±•è§„åˆ’', time: '1å‘¨å‰', icon: 'ğŸ¯' }
                ];

                container.innerHTML = activities.map(activity => `
                    <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                        <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center text-lg">
                            ${activity.icon}
                        </div>
                        <div class="flex-1">
                            <div class="font-medium text-gray-800">${activity.title}</div>
                            <div class="text-sm text-gray-600">${activity.description}</div>
                        </div>
                        <div class="text-xs text-gray-500">${activity.time}</div>
                    </div>
                `).join('');
            }

            initBackgroundAnimation() {
                const canvas = document.getElementById('background-animation');
                if (!canvas) return;

                const sketch = (p) => {
                    let particles = [];
                    
                    p.setup = () => {
                        p.createCanvas(p.windowWidth, p.windowHeight);
                        
                        for (let i = 0; i < 30; i++) {
                            particles.push({
                                x: p.random(p.width),
                                y: p.random(p.height),
                                size: p.random(1, 4),
                                speedX: p.random(-0.3, 0.3),
                                speedY: p.random(-0.3, 0.3),
                                color: p.random(['#FF6B6B', '#4ECDC4', '#FFD93D'])
                            });
                        }
                    };
                    
                    p.draw = () => {
                        p.clear();
                        
                        particles.forEach(particle => {
                            p.fill(particle.color + '30');
                            p.noStroke();
                            p.circle(particle.x, particle.y, particle.size);
                            
                            particle.x += particle.speedX;
                            particle.y += particle.speedY;
                            
                            if (particle.x < 0 || particle.x > p.width) particle.speedX *= -1;
                            if (particle.y < 0 || particle.y > p.height) particle.speedY *= -1;
                        });
                    };
                    
                    p.windowResized = () => {
                        p.resizeCanvas(p.windowWidth, p.windowHeight);
                    };
                };
                
                new p5(sketch, canvas);
            }

            animateElements() {
                // é¡µé¢åŠ è½½åŠ¨ç”»
                anime({
                    targets: '.animate-on-load',
                    translateY: [30, 0],
                    opacity: [0, 1],
                    delay: anime.stagger(100),
                    duration: 800,
                    easing: 'easeOutQuart'
                });

                // ç»Ÿè®¡å¡ç‰‡åŠ¨ç”»
                anime({
                    targets: '.stat-card',
                    scale: [0.9, 1],
                    opacity: [0, 1],
                    delay: anime.stagger(150, {start: 300}),
                    duration: 600,
                    easing: 'easeOutQuart'
                });
            }
        }

        // åˆå§‹åŒ–æ•°æ®åˆ†æç®¡ç†å™¨
        document.addEventListener('DOMContentLoaded', () => {
            window.analyticsManager = new AnalyticsManager();
        });
    </script>
</body>
</html>